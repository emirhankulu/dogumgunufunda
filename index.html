<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Doğum Günün Kutlu Olsun 🎉</title>
  <style>
    html,body{height:100%;margin:0;font-family:Inter,Segoe UI,system-ui,Arial;overflow:hidden}
    body{display:grid;place-items:center;color:#fff;text-align:center;position:relative;}
    
    /* --- Arka Plan Efekti --- */
    body::before{
      content:"";
      position:fixed;
      top:0;left:0;width:100%;height:100%;
      background:url('anne.jpg') center/cover no-repeat;
      filter:blur(6px) brightness(0.8);
      transform:scale(1.1);
      animation: zoomIn 30s ease-in-out infinite alternate;
      z-index:-2;
    }

    @keyframes zoomIn{
      from{transform:scale(1.1) translateY(0px);}
      to{transform:scale(1.2) translateY(-20px);}
    }

    body::after{
      content:"";
      position:fixed;inset:0;
      background:rgba(0,0,0,0.45);
      z-index:-1;
    }

    h1{font-size:clamp(28px,6vw,56px);margin:6px 0 2px;letter-spacing:1px;text-shadow:0 2px 10px rgba(0,0,0,0.5)}
    p.lead{opacity:0.9;margin:0 0 18px;text-shadow:0 1px 8px rgba(0,0,0,0.6)}
    .wrap{padding:28px;background:rgba(0,0,0,0.35);border-radius:18px;box-shadow:0 10px 30px rgba(0,0,0,0.6)}
    .clock{font-weight:700;font-size:18px;background:rgba(255,255,255,0.1);display:inline-block;padding:8px 12px;border-radius:12px}
    .btn{display:inline-flex;gap:10px;align-items:center;border:0;padding:12px 18px;border-radius:12px;font-weight:700;cursor:pointer;background:rgba(255,255,255,0.15);color:#fff;backdrop-filter:blur(4px);transition:0.2s}
    .btn:hover{background:rgba(255,255,255,0.25)}
    .controls{margin-top:16px;display:flex;gap:12px;flex-wrap:wrap;justify-content:center}
    .small{font-size:13px;opacity:0.9}
    canvas#confetti{position:fixed;left:0;top:0;pointer-events:none;z-index:9999}
    footer{margin-top:18px;color:rgba(255,255,255,0.6);font-size:13px;text-shadow:0 1px 4px rgba(0,0,0,0.5)}
    .heart{display:inline-block;margin-left:6px;transform:translateY(-2px)}
  </style>
</head>
<body>
  <canvas id="confetti"></canvas>
  <div class="wrap">
    <h1>Doğum Günün Kutlu Olsun, Anne! <span class="heart">❤️</span></h1>
    <p class="lead">Saat <span class="clock">12:00</span> geldiğinde sürpriz başlatılacak. Dilersen hemen başlatmak için "Kutla" butonuna basabilirsin.</p>

    <div class="controls">
      <button id="celebrate" class="btn">🎉 Kutla</button>
      <button id="play-music" class="btn">▶️ Müzik Aç</button>
      <div class="small">Zaman ayarı: <select id="when">
        <option value="0">12:00 (gece)</option>
        <option value="12" selected>12:00 (gün)</option>
      </select></div>
    </div>

    <p id="countdown" class="small" style="margin-top:10px">Geri sayım: —</p>

    <footer>GitHub Pages'te yayınlamak için dosya adını <code>index.html</code> olarak bırak ve <code>anne.jpg</code> fotoğrafını yanına ekle.</footer>
  </div>

<script>
const celebrateBtn = document.getElementById('celebrate');
const playBtn = document.getElementById('play-music');
const countdownEl = document.getElementById('countdown');
const whenSelect = document.getElementById('when');

// Müzik sonradan eklenecek — şu anda sadece buton görünür.
playBtn.addEventListener('click', ()=>{
  alert('🎵 Müzik dosyası daha eklenmedi, sonra eklenecek.');
});

// --- Confetti ---
const canvas = document.getElementById('confetti');
const ctx = canvas.getContext('2d');
let W = canvas.width = innerWidth;
let H = canvas.height = innerHeight;
window.addEventListener('resize', ()=>{ W = canvas.width = innerWidth; H = canvas.height = innerHeight; });
function random(min,max){return Math.random()*(max-min)+min}
class Confetti{
  constructor(){
    this.x = random(0,W); this.y = random(-20,H/2);
    this.w = random(6,14); this.h = random(8,18);
    this.vx = random(-1,1); this.vy = random(2,6);
    this.color = `hsl(${Math.floor(random(0,360))}deg 90% 60%)`;
    this.r = random(0,360);
    this.spin = random(-7,7);
  }
  step(){ this.x += this.vx; this.y += this.vy; this.r += this.spin; if(this.y>H+50){ this.y = -10; this.x = random(0,W); } }
  draw(){ ctx.save(); ctx.translate(this.x,this.y); ctx.rotate(this.r*Math.PI/180); ctx.fillStyle=this.color; ctx.fillRect(-this.w/2,-this.h/2,this.w,this.h); ctx.restore(); }
}
let confettis = [];
function launchConfetti(amount=120){ confettis = []; for(let i=0;i<amount;i++) confettis.push(new Confetti()); }
function animate(){ ctx.clearRect(0,0,W,H); confettis.forEach(c=>{ c.step(); c.draw(); }); requestAnimationFrame(animate); }
animate();

// --- Geri sayım ---
function getNextTriggerDate(hour){
  const now = new Date();
  const target = new Date(now.getFullYear(), now.getMonth(), now.getDate(), hour, 0, 0, 0);
  if (target <= now) target.setDate(target.getDate()+1);
  return target;
}

function updateCountdown(){
  const selected = parseInt(whenSelect.value,10);
  const target = getNextTriggerDate(selected);
  const diff = target - new Date();
  const h = Math.floor(diff/3600000); const m = Math.floor((diff%3600000)/60000); const s = Math.floor((diff%60000)/1000);
  countdownEl.textContent = `Geri sayım: ${h} saat ${m} dakika ${s} saniye`;
  if (diff <= 900 && diff >= -5000){ triggerCelebrate(); }
}
setInterval(updateCountdown,1000);

let alreadyCelebrated = false;
function triggerCelebrate(){
  if (alreadyCelebrated) return; alreadyCelebrated = true;
  launchConfetti(220);
  const h1 = document.querySelector('h1');
  h1.animate([{transform:'scale(1)'},{transform:'scale(1.06)'},{transform:'scale(1)'}],{duration:1200,iterations:3});
  celebrateBtn.textContent = '🎊 Kutlandı!';
}
celebrateBtn.addEventListener('click', ()=>{ triggerCelebrate(); });
whenSelect.addEventListener('change', ()=>{ alreadyCelebrated=false; updateCountdown(); });
updateCountdown();
</script>
</body>
</html>
